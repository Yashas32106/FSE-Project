def loop():
    while True:
        dis = distance()
        print(f"Distance: {dis} cm")
        time.sleep(0.1)

        # Infrared Sensor Detection for Beeper
        motion = GPIO.input(InfaredPin)
        
        if motion == 1:
            print("Motion detected")
            beep(1)  # 1-second beep
            # Rest for 0.5 seconds after beep
            time.sleep(0.5)
            # Wait until motion signal goes low again before detecting more
            while GPIO.input(InfaredPin) == 1:
                time.sleep(0.1)  # Short delay to avoid rapid re-triggering

        # Vibrator control based on distance - separate from beeper logic
        if dis < 50: 
            vibrator_interval = 0.1
            vibrator(vibrator_interval)
        elif dis < 100:
            vibrator_interval = 1.5
            vibrator(vibrator_interval)
        elif dis < 200:
            vibrator_interval = 3
            vibrator(vibrator_interval)
        else:
            vibrator_off()

        time.sleep(0.1)
